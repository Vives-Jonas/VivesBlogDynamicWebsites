@using System.Web
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model BlogPost


<div class="card mb-2 p-2 bg-light">


    <div class="card-body ">
        <h5 class="card-title">
            @Model.Title
        </h5>
        @if (Model.Author is not null)
        {
            <h6 class="card-subtitle mb-2 text-muted p-1">
                @Model.Author.FirstName @Model.Author.LastName
            </h6>
        }

        <p class="card-text p-1">
            @Model.Content
        </p>
        <div class="card-text my-2"><small class="text-muted">Posted on: @Model.CreatedDate.ToShortDateString() @Model.CreatedDate.ToShortTimeString()</small></div>
        @if (Model.UpdatedDate is not null)
        {
            <div class="card-text my-2"><small class="text-muted">Updated on: @Model.UpdatedDate?.ToShortDateString() @Model.UpdatedDate?.ToShortTimeString()</small></div>
        }
        @if (ViewData["IsDetail"] is true)
        {
            <div class="d-flex flex-wrap gap-2 mt-3">
                <a asp-area="" asp-controller="Blog" asp-action="Index" class="btn btn-outline-secondary">
                    Go Back
                </a>
                <a class="btn btn-outline-primary" asp-action="Edit" asp-route-id="@Model.Id">Edit</a>
                <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="@Model.Id" data-datatype="deleteButton" data-title="@Model.Title">Delete</button>

            </div>
        }
        else
        {
            <div class="d-flex flex-wrap gap-2 mt-3">
                <a asp-area="" asp-controller="Blog" asp-action="Detail" asp-route-id="@Model.Id" class="btn btn-primary">
                    Details
                </a>
                <a class="btn btn-primary" asp-action="Edit" asp-route-id="@Model.Id">Edit</a>
                <button type="button" 
                        class="btn btn-danger" 
                        data-bs-toggle="modal" 
                        data-bs-target="#deleteModal" 
                        data-id="@Model.Id" 
                        data-type="deleteButton"
                        data-title="@HttpUtility.HtmlAttributeEncode(Model.Title)">
                    Delete
                </button>

            </div>

        }

    </div>
</div>
